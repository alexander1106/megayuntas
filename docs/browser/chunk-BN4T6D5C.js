import{a as L}from"./chunk-LAG6LJGU.js";import{a as j,b as N}from"./chunk-MFWOEJ6H.js";import{e as z,h as F,r as H}from"./chunk-VBC45PGF.js";import"./chunk-EWES4JOE.js";import"./chunk-OZO3W66J.js";import{f as I}from"./chunk-B24EO72Z.js";import{$a as a,Bb as V,Cb as k,Fa as v,Ma as l,Na as P,Za as _,_ as S,ab as O,bb as y,db as t,dc as q,eb as i,fb as d,fc as T,ga as m,gb as f,ha as g,hb as x,ib as b,jb as p,kb as s,sb as o,ub as C,xb as E,yb as M,zb as w}from"./chunk-HWFM7EIN.js";import"./chunk-5FZOKLP6.js";var Q=()=>({height:"100%"}),W=()=>({minHeight:"300px"});function G(r,h){if(r&1&&(f(0),t(1,"div",14),d(2,"div",15),i(),x()),r&2){let e=s();l(2),a("innerHTML",e.htmlContent||"No hay contenido disponible",v)}}function D(r,h){if(r&1){let e=b();f(0),t(1,"div",16)(2,"quill-editor",17),w("ngModelChange",function(n){m(e);let u=s();return M(u.htmlContent,n)||(u.htmlContent=n),g(n)}),i()(),x()}if(r&2){let e=s();l(2),E("ngModel",e.htmlContent),a("modules",e.desktopQuillModules)("styles",k(3,Q))}}function A(r,h){if(r&1){let e=b();t(0,"button",18),p("click",function(){m(e);let n=s();return g(n.guardarContenido())}),d(1,"iconify-icon",19),o(2),i()}if(r&2){let e=s();a("disabled",e.isSaving),l(),y("animate-spin",e.isSaving),a("icon",e.isSaving?"mdi:loading":"mdi:content-save"),l(),C(" ",e.isSaving?"Guardando...":"Guardar"," ")}}function B(r,h){if(r&1){let e=b();f(0),t(1,"div",20),d(2,"div",21),i(),t(3,"div",22)(4,"button",23),p("click",function(){m(e);let n=s();return g(n.toggleEditor())}),d(5,"iconify-icon",24),o(6," Editar Visi\xF3n "),i()(),x()}if(r&2){let e=s();l(2),a("innerHTML",e.htmlContent||"No hay contenido disponible",v)}}function U(r,h){if(r&1){let e=b();f(0),t(1,"div",25)(2,"div",26)(3,"div",27),d(4,"iconify-icon",28),t(5,"span",29),o(6,"Editor de Texto Avanzado"),i()(),t(7,"button",30),p("click",function(){m(e);let n=s();return g(n.toggleEditor())}),d(8,"iconify-icon",31),i()()(),t(9,"div",32)(10,"quill-editor",33),w("ngModelChange",function(n){m(e);let u=s();return M(u.htmlContent,n)||(u.htmlContent=n),g(n)}),i()(),t(11,"div",34)(12,"div",35),d(13,"iconify-icon",36),t(14,"div",37)(15,"p",38),o(16,"Herramientas disponibles:"),i(),t(17,"p"),o(18,"\u2022 "),t(19,"strong"),o(20,"Formato:"),i(),o(21," Negrita, cursiva, subrayado, tachado"),i(),t(22,"p"),o(23,"\u2022 "),t(24,"strong"),o(25,"Estructura:"),i(),o(26," T\xEDtulos, listas, citas, c\xF3digo"),i(),t(27,"p"),o(28,"\u2022 "),t(29,"strong"),o(30,"Estilo:"),i(),o(31," Colores, fuentes, tama\xF1os, alineaci\xF3n"),i(),t(32,"p"),o(33,"\u2022 "),t(34,"strong"),o(35,"Media:"),i(),o(36," Enlaces, im\xE1genes"),i()()()(),t(37,"div",39)(38,"button",40),p("click",function(){m(e);let n=s();return g(n.cancelarEdicion())}),d(39,"iconify-icon",41),o(40," Cancelar "),i(),t(41,"button",42),p("click",function(){m(e);let n=s();return g(n.guardarContenido())}),d(42,"iconify-icon",19),o(43),i()(),x()}if(r&2){let e=s();l(10),E("ngModel",e.htmlContent),a("modules",e.mobileQuillModules)("styles",k(8,W)),l(31),a("disabled",e.isSaving),l(),y("animate-spin",e.isSaving),a("icon",e.isSaving?"mdi:loading":"mdi:content-save"),l(),C(" ",e.isSaving?"Guardando...":"Guardar"," ")}}var ne=(()=>{class r{constructor(e){this.empresasSvc=e,this.showEditor=!1,this.htmlContent="",this.isSaving=!1,this.originalContent="",this.desktopQuillModules={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video"],["clean"]]},this.mobileQuillModules={toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,!1]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{align:[]}],[{color:[]},{background:[]}],[{size:["small",!1,"large"]}],[{font:[]}],["link","image"],["clean"]]},this.quillConfig={formats:["bold","italic","underline","strike","blockquote","code-block","header","list","script","indent","direction","size","color","background","font","align","link","image","video"]}}ngOnInit(){this.cargarVision()}cargarVision(){this.empresasSvc.getInfoInstitucional().subscribe({next:e=>{this.info=e,this.htmlContent=e.vision||"",this.originalContent=this.htmlContent},error:e=>{console.error("Error al cargar visi\xF3n:",e),this.htmlContent=""}})}toggleEditor(){this.showEditor||(this.originalContent=this.htmlContent),this.showEditor=!this.showEditor}cancelarEdicion(){this.htmlContent=this.originalContent,this.showEditor=!1}onEditar(){this.showEditor=!0}guardarContenido(){this.isSaving||(this.isSaving=!0,this.empresasSvc.actualizarInfoInstitucional({vision:this.htmlContent}).subscribe({next:()=>{this.showEditor=!1,this.isSaving=!1,this.originalContent=this.htmlContent,console.log("Visi\xF3n actualizada:",this.htmlContent),this.mostrarMensajeExito()},error:e=>{console.error("Error al guardar visi\xF3n:",e),this.isSaving=!1,alert("No se pudo actualizar la visi\xF3n. Intenta de nuevo.")}}))}mostrarMensajeExito(){console.log("Visi\xF3n guardada exitosamente")}static{this.\u0275fac=function(c){return new(c||r)(P(L))}}static{this.\u0275cmp=S({type:r,selectors:[["app-vision"]],standalone:!0,features:[V],decls:19,vars:8,consts:[[1,"flex","flex-col","bg-white","rounded-md","shadow-sm"],[1,"p-3","md:p-4"],[1,"flex","items-center","pb-2","md:pl-2","pb-3","border-b","border-gray-100"],["icon","mdi:eye",1,"text-xl","md:text-2xl","mr-2"],[1,"text-lg","md:text-xl","font-semibold"],[1,"hidden","md:block"],[1,"rounded-md","px-4","py-2","w-full","max-w-full","mx-auto","bg-gray-200"],[1,"rounded-md","text-sm","h-full",2,"height","100%"],[4,"ngIf"],[1,"flex","justify-end","mt-4","space-x-2"],[1,"flex","items-center","bg-orange-400","text-white","rounded-full","px-4","py-2","text-sm","hover:bg-orange-500","transition-colors","duration-200",3,"click"],["icon","mdi:pencil",1,"mr-2"],["class","flex items-center bg-green-500 text-white rounded-full px-4 py-2 text-sm hover:bg-green-600 disabled:opacity-50 transition-colors duration-200",3,"disabled","click",4,"ngIf"],[1,"md:hidden"],[1,"bg-gray-200","rounded","p-4","h-full","overflow-auto"],[1,"prose","prose-sm","max-w-none",3,"innerHTML"],[1,"bg-white","rounded","h-full","flex","flex-col"],["placeholder","Escribe la visi\xF3n de tu empresa...",1,"desktop-editor","flex-1",3,"ngModelChange","ngModel","modules","styles"],[1,"flex","items-center","bg-green-500","text-white","rounded-full","px-4","py-2","text-sm","hover:bg-green-600","disabled:opacity-50","transition-colors","duration-200",3,"click","disabled"],[1,"mr-2",3,"icon"],[1,"bg-gray-100","rounded-lg","p-4","mt-4","min-h-[200px]"],[1,"prose","prose-sm","max-w-none","text-sm","leading-relaxed",3,"innerHTML"],[1,"mt-4"],[1,"w-full","flex","items-center","justify-center","bg-orange-400","text-white","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-orange-500","transition-colors","duration-200",3,"click"],["icon","mdi:pencil",1,"mr-2","text-lg"],[1,"bg-gray-50","rounded-t-lg","p-3","mt-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["icon","mdi:format-text",1,"text-lg","text-gray-600","mr-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"p-1","hover:bg-gray-200","rounded","transition-colors",3,"click"],["icon","mdi:close",1,"text-lg","text-gray-600"],[1,"bg-white","rounded-b-lg","border","border-gray-200","border-t-0"],["placeholder","Escribe la visi\xF3n de tu empresa usando todas las herramientas de formato disponibles...",1,"mobile-editor-full",3,"ngModelChange","ngModel","modules","styles"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3","mt-3"],[1,"flex","items-start"],["icon","mdi:information",1,"text-blue-500","text-lg","mr-2","mt-0.5"],[1,"text-xs","text-blue-700"],[1,"font-medium","mb-1"],[1,"flex","space-x-3","mt-4"],[1,"flex-1","flex","items-center","justify-center","bg-orange-500","text-white","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-gray-600","transition-colors","duration-200",3,"click"],["icon","mdi:close",1,"mr-2"],[1,"flex-1","flex","items-center","justify-center","bg-green-500","text-white","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-green-600","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"click","disabled"]],template:function(c,n){c&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),d(3,"iconify-icon",3),t(4,"h2",4),o(5,"Visi\xF3n"),i()(),t(6,"div",5)(7,"div",6)(8,"div",7),_(9,G,3,1,"ng-container",8)(10,D,3,4,"ng-container",8),i()(),t(11,"div",9)(12,"button",10),p("click",function(){return n.showEditor=!n.showEditor}),d(13,"iconify-icon",11),o(14),i(),_(15,A,3,5,"button",12),i()(),t(16,"div",13),_(17,B,7,1,"ng-container",8)(18,U,44,9,"ng-container",8),i()()()),c&2&&(l(7),O("height",299,"px"),l(2),a("ngIf",!n.showEditor),l(),a("ngIf",n.showEditor),l(4),C(" ",n.showEditor?"Cerrar":"Editar"," "),l(),a("ngIf",n.showEditor),l(2),a("ngIf",!n.showEditor),l(),a("ngIf",n.showEditor))},dependencies:[T,q,H,z,F,N,j,I],styles:[".desktop-editor[_ngcontent-%COMP%]     .ql-toolbar{border-top:1px solid #ccc;border-left:1px solid #ccc;border-right:1px solid #ccc;background-color:#f8f9fa;padding:8px}.desktop-editor[_ngcontent-%COMP%]     .ql-container{border-left:1px solid #ccc;border-right:1px solid #ccc;border-bottom:1px solid #ccc;height:calc(100% - 42px)}.desktop-editor[_ngcontent-%COMP%]     .ql-editor{padding:12px 15px;line-height:1.6;font-size:14px}@media (max-width: 767px){.mobile-editor-full[_ngcontent-%COMP%]     .ql-toolbar{border-top:none;border-left:none;border-right:none;padding:8px 12px;background-color:#f8f9fa;border-bottom:1px solid #e5e7eb}.mobile-editor-full[_ngcontent-%COMP%]     .ql-container{border-left:none;border-right:none;border-bottom:none;font-size:16px}.mobile-editor-full[_ngcontent-%COMP%]     .ql-editor{padding:16px;line-height:1.6;min-height:300px}.mobile-editor-full[_ngcontent-%COMP%]     .ql-editor.ql-blank:before{font-style:normal;color:#9ca3af;font-size:14px;line-height:1.5}.mobile-editor-full[_ngcontent-%COMP%]     .ql-toolbar{display:flex;flex-wrap:wrap;gap:4px}.mobile-editor-full[_ngcontent-%COMP%]     .ql-toolbar .ql-formats{margin-right:8px;margin-bottom:4px}.mobile-editor-full[_ngcontent-%COMP%]     .ql-toolbar button, .mobile-editor-full[_ngcontent-%COMP%]     .ql-toolbar .ql-picker{padding:6px;margin:0 1px;min-height:32px}.mobile-editor-full[_ngcontent-%COMP%]     .ql-picker-options{max-height:200px;overflow-y:auto}.mobile-editor-full[_ngcontent-%COMP%]     .ql-picker-item{padding:8px 12px}.mobile-editor-full[_ngcontent-%COMP%]     .ql-color-picker .ql-picker-item, .mobile-editor-full[_ngcontent-%COMP%]     .ql-background .ql-picker-item{width:24px;height:24px;margin:2px}}.prose[_ngcontent-%COMP%]{color:#374151}.prose[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:.5em 0}.prose[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin:.4em 0}.prose[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;margin:.3em 0}.prose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5em 0}.prose[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:.5em 0;padding-left:1.5em}.prose[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{border-left:4px solid #d1d5db;padding-left:1em;margin:1em 0;font-style:italic;color:#6b7280}.prose[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#f3f4f6;padding:.2em .4em;border-radius:.25rem;font-family:monospace;font-size:.9em}.prose[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#f3f4f6;padding:1em;border-radius:.5rem;overflow-x:auto;margin:1em 0}.transition-all[_ngcontent-%COMP%]{transition:all .2s ease-in-out}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})}}return r})();export{ne as VisionComponent};
