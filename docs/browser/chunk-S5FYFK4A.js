import{b as ee,c as W,e as N,h as F,j as B,k as j,l as L,m as z,n as D,o as O,q as U,r as q}from"./chunk-VBC45PGF.js";import{a as $}from"./chunk-EWES4JOE.js";import{b as Q,c as X}from"./chunk-B24EO72Z.js";import{$a as p,Bb as S,Ma as d,Na as P,P as Y,U as Z,Za as b,_ as A,cc as K,db as r,dc as I,eb as i,fb as y,fc as V,ga as m,ha as c,ib as v,jb as g,kb as h,pa as M,rb as E,sb as n,tb as C,ub as T,vb as J,xb as f,yb as x,zb as _}from"./chunk-HWFM7EIN.js";import"./chunk-5FZOKLP6.js";var k=(()=>{class a{constructor(e){this.http=e,this.apiUrl=$.apiUrl}getAdministradores(){return this.http.get(`${this.apiUrl}/administradores`)}crearAdministrador(e){return this.http.post(`${this.apiUrl}/administradores`,null,{params:e})}actualizarAdministrador(e){let s=this.getAuthHeaders(),t=new Q().set("id",e.id.toString()).set("nombres",e.nombres||"").set("apellidos",e.apellidos||"").set("username",e.username||"").set("email",e.email||"").set("rol",e.rol?e.rol.toString():"1");if(e.passwordActual&&e.passwordActual.trim()!==""){if(!e.nuevaPassword||!e.confirmarPassword)throw new Error("Si proporciona la contrase\xF1a actual, debe completar nueva contrase\xF1a y confirmar contrase\xF1a");if(e.nuevaPassword!==e.confirmarPassword)throw new Error("La nueva contrase\xF1a y la confirmaci\xF3n no coinciden");t=t.set("passwordActual",e.passwordActual).set("nuevaPassword",e.nuevaPassword).set("confirmarPassword",e.confirmarPassword)}return console.log("Par\xE1metros a enviar:",t.toString()),this.http.put(`${this.apiUrl}/administradores`,null,{headers:s,params:t})}eliminarAdministrador(e){return this.http.post(`${this.apiUrl}/administradores/eliminar?id=${e}`,{})}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}}static{this.\u0275fac=function(s){return new(s||a)(Z(X))}}static{this.\u0275prov=Y({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function oe(a,w){a&1&&(r(0,"span",23),n(1," El usuario debe tener al menos 4 caracteres. "),i())}function de(a,w){a&1&&(r(0,"span",23),n(1," M\xEDnimo 7 caracteres, con may\xFAscula, n\xFAmero o s\xEDmbolo. "),i())}function se(a,w){a&1&&(r(0,"span",23),n(1," Las contrase\xF1as no coinciden. "),i())}function le(a,w){a&1&&(r(0,"span",23),n(1," Email no v\xE1lido. "),i())}var ie=(()=>{class a{constructor(e){this.administradorService=e,this.cerrar=new M,this.creado=new M,this.administradorNuevo={nombres:"",apellidos:"",username:"",password:"",email:"",rolNuevoAdministrador:1},this.confirmPassword=""}cerrarModal(){this.cerrar.emit()}guardarAdministrador(){if(this.confirmPassword!==this.administradorNuevo.password){alert("Las contrase\xF1as no coinciden");return}this.administradorService.crearAdministrador(this.administradorNuevo).subscribe({next:e=>{console.log("Administrador creado:",e),this.creado.emit(),this.cerrarModal()},error:e=>{console.error("Error al crear administrador:",e),alert("Error al crear administrador.")}})}static{this.\u0275fac=function(s){return new(s||a)(P(k))}}static{this.\u0275cmp=A({type:a,selectors:[["app-agregar-administradores-modal"]],outputs:{cerrar:"cerrar",creado:"creado"},standalone:!0,features:[S],decls:57,vars:13,consts:[["usuario","ngModel"],["clave","ngModel"],["confirmar","ngModel"],["correo","ngModel"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","overflow-auto","bg-black","bg-opacity-50"],[1,"w-full","max-w-lg","my-4","bg-gray-200","rounded-lg","shadow-lg","max-h-[80vh]","overflow-y-auto"],[1,"p-3","border-b","border-gray-300"],[1,"text-2xl","font-bold","text-black"],[1,"p-4","space-y-4"],[1,"flex","flex-col"],[1,"flex","items-center"],[1,"w-32","font-medium","text-black"],["type","text",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["type","text","name","username","required","","minlength","4",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["class","ml-32 text-xs text-red-600",4,"ngIf"],["type","password","name","password","required","","pattern","(?=.*[A-Z])(?=.*[0-9])(?=.*[\\W_]).{7,}",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["type","password","name","confirmar","required","",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["type","email","name","email","required","","email","",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],[1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","justify-end","space-x-4","mt-6"],[1,"px-6","py-2","bg-teal-500","text-white","rounded","hover:bg-teal-600","transition",3,"click"],[1,"px-6","py-2","bg-orange-500","text-white","rounded","hover:bg-orange-600","transition",3,"click"],[1,"ml-32","text-xs","text-red-600"]],template:function(s,t){if(s&1){let l=v();r(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2",7),n(4,"Nuevo Admin | Manej. Contenido"),i()(),r(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),n(9,"Nombres:"),i(),r(10,"input",12),_("ngModelChange",function(o){return m(l),x(t.administradorNuevo.nombres,o)||(t.administradorNuevo.nombres=o),c(o)}),i()()(),r(11,"div",9)(12,"div",10)(13,"label",11),n(14,"Apellidos:"),i(),r(15,"input",12),_("ngModelChange",function(o){return m(l),x(t.administradorNuevo.apellidos,o)||(t.administradorNuevo.apellidos=o),c(o)}),i()()(),r(16,"div",9)(17,"div",10)(18,"label",11),n(19,"Usuario:"),i(),r(20,"input",13,0),_("ngModelChange",function(o){return m(l),x(t.administradorNuevo.username,o)||(t.administradorNuevo.username=o),c(o)}),i()(),b(22,oe,2,0,"span",14),i(),r(23,"div",9)(24,"div",10)(25,"label",11),n(26,"Contrase\xF1a:"),i(),r(27,"input",15,1),_("ngModelChange",function(o){return m(l),x(t.administradorNuevo.password,o)||(t.administradorNuevo.password=o),c(o)}),i()(),b(29,de,2,0,"span",14),i(),r(30,"div",9)(31,"div",10)(32,"label",11),n(33,"Confirmar Contrase\xF1a:"),i(),r(34,"input",16,2),_("ngModelChange",function(o){return m(l),x(t.confirmPassword,o)||(t.confirmPassword=o),c(o)}),i()(),b(36,se,2,0,"span",14),i(),r(37,"div",9)(38,"div",10)(39,"label",11),n(40,"Email:"),i(),r(41,"input",17,3),_("ngModelChange",function(o){return m(l),x(t.administradorNuevo.email,o)||(t.administradorNuevo.email=o),c(o)}),i()(),b(43,le,2,0,"span",14),i(),r(44,"div",10)(45,"label",11),n(46,"Perfil:"),i(),r(47,"select",18),_("ngModelChange",function(o){return m(l),x(t.administradorNuevo.rolNuevoAdministrador,o)||(t.administradorNuevo.rolNuevoAdministrador=o),c(o)}),r(48,"option",19),n(49,"Administrador"),i(),r(50,"option",19),n(51,"Manejador de contenido"),i()()(),r(52,"div",20)(53,"button",21),g("click",function(){return m(l),c(t.guardarAdministrador())}),n(54," Guardar "),i(),r(55,"button",22),g("click",function(){return m(l),c(t.cerrarModal())}),n(56," Cancelar "),i()()()()()}if(s&2){let l=E(21),u=E(28),o=E(35),G=E(42);d(10),f("ngModel",t.administradorNuevo.nombres),d(5),f("ngModel",t.administradorNuevo.apellidos),d(5),f("ngModel",t.administradorNuevo.username),d(2),p("ngIf",l.invalid&&l.touched),d(5),f("ngModel",t.administradorNuevo.password),d(2),p("ngIf",u.invalid&&u.touched),d(5),f("ngModel",t.confirmPassword),d(2),p("ngIf",t.confirmPassword!==t.administradorNuevo.password&&o.touched),d(5),f("ngModel",t.administradorNuevo.email),d(2),p("ngIf",G.invalid&&G.touched),d(4),f("ngModel",t.administradorNuevo.rolNuevoAdministrador),d(),p("value",1),d(2),p("value",2)}},dependencies:[V,I,q,j,L,W,B,N,z,O,U,D,F]})}}return a})();var re=(()=>{class a{constructor(){this.adminsId=null,this.confirmar=new M,this.cancelar=new M}confirmarEliminacion(){console.log("ID a eliminar:",this.adminsId),this.adminsId!==null&&this.confirmar.emit(this.adminsId)}cancelarEliminacion(){this.cancelar.emit()}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=A({type:a,selectors:[["app-eliminar-administradores-modal"]],inputs:{adminsId:"adminsId"},outputs:{confirmar:"confirmar",cancelar:"cancelar"},standalone:!0,features:[S],decls:13,vars:0,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black","bg-opacity-50"],[1,"w-full","max-w-md","bg-white","rounded-lg","shadow-lg","p-6","text-center"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","rounded-full","bg-yellow-300","flex","items-center","justify-center"],[1,"text-white","text-3xl","font-bold"],[1,"text-2xl","font-bold","mb-6"],[1,"flex","justify-center","space-x-4"],[1,"px-6","py-2","bg-teal-500","text-white","rounded","hover:bg-teal-600","transition",3,"click"],[1,"px-6","py-2","bg-orange-400","text-white","rounded","hover:bg-orange-500","transition",3,"click"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),n(5,"i"),i()()(),r(6,"h2",5),n(7," \xBFEstas seguro eliminar este elemento? "),i(),r(8,"div",6)(9,"button",7),g("click",function(){return t.confirmarEliminacion()}),n(10," Aceptar "),i(),r(11,"button",8),g("click",function(){return t.cancelarEliminacion()}),n(12," Cancelar "),i()()()())},dependencies:[V]})}}return a})();function me(a,w){a&1&&(r(0,"span",24),n(1," El usuario debe tener al menos 4 caracteres. "),i())}function ce(a,w){a&1&&(r(0,"span",24),n(1," Email no v\xE1lido. "),i())}function pe(a,w){a&1&&(r(0,"span",24),n(1," M\xEDnimo 7 caracteres, con may\xFAscula, n\xFAmero o s\xEDmbolo. "),i())}function ue(a,w){a&1&&(r(0,"span",24),n(1," Las contrase\xF1as no coinciden. "),i())}function ge(a,w){if(a&1){let e=v();r(0,"div",25)(1,"div",10)(2,"div",11)(3,"label",12),n(4,"Contrase\xF1a Actual:"),i(),r(5,"input",26,2),_("ngModelChange",function(t){m(e);let l=h();return x(l.administradorEditado.passwordActual,t)||(l.administradorEditado.passwordActual=t),c(t)}),i()()(),r(7,"div",10)(8,"div",11)(9,"label",12),n(10,"Password Nuevo:"),i(),r(11,"input",27,3),_("ngModelChange",function(t){m(e);let l=h();return x(l.administradorEditado.nuevaPassword,t)||(l.administradorEditado.nuevaPassword=t),c(t)}),i()(),b(13,pe,2,0,"span",15),i(),r(14,"div",10)(15,"div",11)(16,"label",12),n(17,"Confirmar Password:"),i(),r(18,"input",28,4),_("ngModelChange",function(t){m(e);let l=h();return x(l.administradorEditado.confirmarPassword,t)||(l.administradorEditado.confirmarPassword=t),c(t)}),i()(),b(20,ue,2,0,"span",15),i()()}if(a&2){let e=E(12),s=E(19),t=h();d(5),f("ngModel",t.administradorEditado.passwordActual),d(6),f("ngModel",t.administradorEditado.nuevaPassword),d(2),p("ngIf",e.invalid&&e.touched&&t.administradorEditado.nuevaPassword),d(5),f("ngModel",t.administradorEditado.confirmarPassword),d(2),p("ngIf",t.administradorEditado.confirmarPassword!==t.administradorEditado.nuevaPassword&&s.touched&&t.administradorEditado.nuevaPassword&&t.administradorEditado.confirmarPassword)}}var ne=(()=>{class a{constructor(e){this.administradorService=e,this.administrador={},this.administradorEditado={id:"",nombres:"",apellidos:"",username:"",email:"",rol:1,passwordActual:"",nuevaPassword:"",confirmarPassword:""},this.cerrar=new M,this.actualizado=new M,this.cambiarPassword=!1}ngOnInit(){this.administradorEditado={id:this.administrador.id,nombres:this.administrador.nombres||"",apellidos:this.administrador.apellidos||"",username:this.administrador.username||"",email:this.administrador.email||"",rol:this.administrador.rol||1,passwordActual:"",nuevaPassword:"",confirmarPassword:""},console.log("Administrador original:",this.administrador),console.log("Administrador editado (copia):",this.administradorEditado)}cerrarModal(){this.cerrar.emit()}validarCampos(){if(!this.administradorEditado.nombres.trim()||!this.administradorEditado.apellidos.trim()||!this.administradorEditado.username.trim()||!this.administradorEditado.email.trim())return alert("Todos los campos b\xE1sicos son obligatorios."),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.administradorEditado.email))return alert("El formato del email no es v\xE1lido."),!1;if(this.cambiarPassword){if(!this.administradorEditado.passwordActual.trim())return alert("Debe ingresar la contrase\xF1a actual para cambiarla."),!1;if(!this.administradorEditado.nuevaPassword.trim())return alert("Debe ingresar la nueva contrase\xF1a."),!1;if(this.administradorEditado.nuevaPassword.length<6)return alert("La nueva contrase\xF1a debe tener al menos 6 caracteres."),!1;if(this.administradorEditado.nuevaPassword!==this.administradorEditado.confirmarPassword)return alert("La nueva contrase\xF1a y la confirmaci\xF3n no coinciden."),!1}return!0}guardarAdministrador(){if(this.validarCampos()){this.cambiarPassword||(this.administradorEditado.passwordActual="",this.administradorEditado.nuevaPassword="",this.administradorEditado.confirmarPassword=""),console.log("Datos del administrador a actualizar:",this.administradorEditado);try{this.administradorService.actualizarAdministrador(this.administradorEditado).subscribe({next:e=>{console.log("Administrador actualizado exitosamente:",e),alert("Administrador actualizado correctamente."),this.actualizado.emit(),this.cerrarModal()},error:e=>{console.error("Error al actualizar administrador:",e);let s=e.error?.message||e.message||"Error desconocido al actualizar administrador.";alert("Error: "+s)}})}catch(e){alert("Error de validaci\xF3n: "+e.message)}}}static{this.\u0275fac=function(s){return new(s||a)(P(k))}}static{this.\u0275cmp=A({type:a,selectors:[["app-editar-administradores-modal"]],inputs:{administrador:"administrador"},outputs:{cerrar:"cerrar",actualizado:"actualizado"},standalone:!0,features:[S],decls:48,vars:11,consts:[["usuario","ngModel"],["correo","ngModel"],["passwordActual","ngModel"],["nuevaClave","ngModel"],["confirmar","ngModel"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","overflow-auto","bg-black","bg-opacity-50"],[1,"w-full","max-w-lg","my-4","bg-gray-200","rounded-lg","shadow-lg","max-h-[80vh]","overflow-y-auto"],[1,"p-3","border-b","border-gray-300"],[1,"text-2xl","font-bold","text-black"],[1,"p-4","space-y-4"],[1,"flex","flex-col"],[1,"flex","items-center"],[1,"w-32","font-medium","text-black"],["type","text",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["type","text","name","username","required","","minlength","4",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["class","ml-32 text-xs text-red-600",4,"ngIf"],["type","email","name","email","required","","email","",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],[1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],[3,"value"],["type","checkbox","name","cambiarPassword",1,"ml-2",3,"ngModelChange","ngModel"],["class","space-y-4 border-t pt-4",4,"ngIf"],[1,"flex","justify-end","space-x-4","mt-6"],[1,"px-6","py-2","bg-teal-500","text-white","rounded","hover:bg-teal-600","transition",3,"click"],[1,"px-6","py-2","bg-orange-500","text-white","rounded","hover:bg-orange-600","transition",3,"click"],[1,"ml-32","text-xs","text-red-600"],[1,"space-y-4","border-t","pt-4"],["type","password","name","passwordActual",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["type","password","name","nuevaPassword","pattern","(?=.*[A-Z])(?=.*[0-9])(?=.*[\\W_]).{7,}",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["type","password","name","confirmarPassword",1,"flex-1","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"]],template:function(s,t){if(s&1){let l=v();r(0,"div",5)(1,"div",6)(2,"div",7)(3,"h2",8),n(4,"Editar Admin | Manej. Contenido"),i()(),r(5,"div",9)(6,"div",10)(7,"div",11)(8,"label",12),n(9,"Nombres:"),i(),r(10,"input",13),_("ngModelChange",function(o){return m(l),x(t.administradorEditado.nombres,o)||(t.administradorEditado.nombres=o),c(o)}),i()()(),r(11,"div",10)(12,"div",11)(13,"label",12),n(14,"Apellidos:"),i(),r(15,"input",13),_("ngModelChange",function(o){return m(l),x(t.administradorEditado.apellidos,o)||(t.administradorEditado.apellidos=o),c(o)}),i()()(),r(16,"div",10)(17,"div",11)(18,"label",12),n(19,"Usuario:"),i(),r(20,"input",14,0),_("ngModelChange",function(o){return m(l),x(t.administradorEditado.username,o)||(t.administradorEditado.username=o),c(o)}),i()(),b(22,me,2,0,"span",15),i(),r(23,"div",10)(24,"div",11)(25,"label",12),n(26,"Email:"),i(),r(27,"input",16,1),_("ngModelChange",function(o){return m(l),x(t.administradorEditado.email,o)||(t.administradorEditado.email=o),c(o)}),i()(),b(29,ce,2,0,"span",15),i(),r(30,"div",11)(31,"label",12),n(32,"Perfil:"),i(),r(33,"select",17),_("ngModelChange",function(o){return m(l),x(t.administradorEditado.rol,o)||(t.administradorEditado.rol=o),c(o)}),r(34,"option",18),n(35,"Administrador"),i(),r(36,"option",18),n(37,"Manejador de contenido"),i()()(),r(38,"div",11)(39,"label",12),n(40,"Cambiar contrase\xF1a:"),i(),r(41,"input",19),_("ngModelChange",function(o){return m(l),x(t.cambiarPassword,o)||(t.cambiarPassword=o),c(o)}),i()(),b(42,ge,21,5,"div",20),r(43,"div",21)(44,"button",22),g("click",function(){return m(l),c(t.guardarAdministrador())}),n(45," Guardar "),i(),r(46,"button",23),g("click",function(){return m(l),c(t.cerrarModal())}),n(47," Cancelar "),i()()()()()}if(s&2){let l=E(21),u=E(28);d(10),f("ngModel",t.administradorEditado.nombres),d(5),f("ngModel",t.administradorEditado.apellidos),d(5),f("ngModel",t.administradorEditado.username),d(2),p("ngIf",l.invalid&&l.touched),d(5),f("ngModel",t.administradorEditado.email),d(2),p("ngIf",u.invalid&&u.touched),d(4),f("ngModel",t.administradorEditado.rol),d(),p("value",1),d(2),p("value",2),d(5),f("ngModel",t.cambiarPassword),d(),p("ngIf",t.cambiarPassword)}},dependencies:[V,I,q,j,L,W,ee,B,N,z,O,U,D,F]})}}return a})();function fe(a,w){if(a&1){let e=v();r(0,"tr")(1,"td",38),n(2),i(),r(3,"td",39),n(4),i(),r(5,"td",39),n(6),i(),r(7,"td",39),n(8),i(),r(9,"td",39),n(10),i(),r(11,"td",39),n(12),i(),r(13,"td",40)(14,"button",41),g("click",function(){let t=m(e).$implicit,l=h();return c(l.abrirModalEditar(t))}),y(15,"iconify-icon",42),i(),r(16,"button",43),g("click",function(){let t=m(e).$implicit,l=h();return c(l.abrirModalEliminar(t.id))}),y(17,"iconify-icon",44),i()()()}if(a&2){let e=w.$implicit;d(2),C(e.id),d(2),C(e.username),d(2),C(e.nombre),d(2),C(e.apellido),d(2),C(e.email),d(2),C(e.perfil)}}function xe(a,w){if(a&1){let e=v();r(0,"div",45)(1,"div",46)(2,"div",47)(3,"div",48),y(4,"iconify-icon",49),i(),r(5,"div",50)(6,"h3",51),n(7),i(),r(8,"p",52),n(9),i()()(),r(10,"div",53)(11,"button",54),g("click",function(){let t=m(e).$implicit,l=h();return c(l.abrirModalEditar(t))}),y(12,"iconify-icon",55),i(),r(13,"button",56),g("click",function(){let t=m(e).$implicit,l=h();return c(l.abrirModalEliminar(t.id))}),y(14,"iconify-icon",57),i()()(),r(15,"div",58)(16,"div",59)(17,"span",60),n(18,"Usuario:"),i(),r(19,"span",61),n(20),i()(),r(21,"div",62)(22,"span",63),n(23,"Email:"),i(),r(24,"span",64),n(25),i()(),r(26,"div",65)(27,"span",60),n(28,"Perfil:"),i(),r(29,"span",66),n(30),i()()()()}if(a&2){let e=w.$implicit;d(7),J("",e.nombre," ",e.apellido,""),d(2),T("ID: ",e.id,""),d(11),C(e.username),d(5),C(e.email),d(5),T(" ",e.perfil," ")}}function _e(a,w){a&1&&(r(0,"div",67),y(1,"iconify-icon",68),r(2,"p",69),n(3,"No hay administradores registrados"),i()())}function we(a,w){if(a&1){let e=v();r(0,"app-agregar-administradores-modal",70),g("cerrar",function(){m(e);let t=h();return c(t.cerrarModalAgregar())}),i()}}function he(a,w){if(a&1){let e=v();r(0,"app-editar-administradores-modal",71),g("cerrar",function(){m(e);let t=h();return c(t.cerrarModalEditar())}),i()}if(a&2){let e=h();p("administrador",e.administradorSeleccionado)}}function be(a,w){if(a&1){let e=v();r(0,"app-eliminar-administradores-modal",72),g("confirmar",function(t){m(e);let l=h();return c(l.eliminarAdministrador(t))})("cancelar",function(){m(e);let t=h();return c(t.cerrarModalEliminar())}),i()}if(a&2){let e=h();p("adminsId",e.adminsIdAEliminar)}}var Ze=(()=>{class a{constructor(e){this.administradorService=e,this.admins=[],this.mostrarModalAgregar=!1,this.mostrarModalEditar=!1,this.mostrarModalEliminar=!1,this.adminsIdAEliminar=null}ngOnInit(){this.cargarAdministradores()}cargarAdministradores(){this.administradorService.getAdministradores().subscribe({next:e=>{console.log("Datos recibidos del servicio:",e),this.admins=e.map(s=>({id:s.id,nombre:s.nombres,username:s.username,apellido:s.apellidos,email:s.email,perfil:s.rol})),console.log("Administradores procesados:",this.admins)},error:e=>{console.error("Error al cargar administradores",e)}})}trackByAdminId(e,s){return s.id}abrirModalAgregar(){this.mostrarModalAgregar=!0}cerrarModalAgregar(){this.mostrarModalAgregar=!1,this.cargarAdministradores()}abrirModalEditar(e){this.administradorSeleccionado=e,this.mostrarModalEditar=!0}cerrarModalEditar(){this.mostrarModalEditar=!1,this.cargarAdministradores()}abrirModalEliminar(e){this.mostrarModalEliminar=!0,this.adminsIdAEliminar=e}cerrarModalEliminar(){this.mostrarModalEliminar=!1,this.adminsIdAEliminar=null}eliminarAdministrador(e){if(e==null||e===void 0){console.error("ID inv\xE1lido para eliminaci\xF3n");return}this.administradorService.eliminarAdministrador(e).subscribe({next:()=>{console.log(`Administrador con ID ${e} eliminado`),this.cerrarModalEliminar(),this.cargarAdministradores()},error:s=>{console.error("Error al eliminar administrador:",s)}})}static{this.\u0275fac=function(s){return new(s||a)(P(k))}}static{this.\u0275cmp=A({type:a,selectors:[["app-administradores"]],standalone:!0,features:[S],decls:59,vars:8,consts:[[1,"bg-gray-100","w-full","min-h-screen","flex","flex-col"],[1,"flex-1","w-full","mt-2","p-1","md:p-2","relative","z-10"],[1,"max-w-screen","mx-5"],[1,"hidden","md:block"],[1,"grid","grid-cols-2","gap-4","bg-[#00796B]","px-2","py-1"],[1,"flex-col","md:flex-row","flex","items-center"],[1,"text-2xl","md:text-2xl","font-bold","text-white"],[1,"flex-col","md:flex-row","flex","items-right","justify-end"],["for","buscar",1,"text-sm","text-white","flex","items-center","font-medium","mr-2","ml-5","whitespace-nowrap"],["id","buscar","type","text","placeholder","",1,"border","border-gray-300","rounded","px-3","w-full","max-w-xs","focus:outline-none"],[1,"text-right","md:text-right","flex","items-center","ml-5"],[1,"flex","items-center","space-x-2","bg-[#00796B]","text-white","px-3","py-1","rounded","hover:bg-teal-600","transition",3,"click"],["icon","mdi:account-plus-outline",1,"text-lg"],[1,"text-sm"],[1,"md:hidden","mb-6","relative","z-10","bg-gray-100"],[1,"mb-4","bg-gray-100","pt-2"],[1,"text-xl","font-bold","text-gray-900"],[1,"space-y-4","bg-gray-100"],[1,"relative","z-10"],["id","buscar-mobile","type","text","placeholder","Buscar administrador...",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-3","pr-12","text-sm","focus:outline-none","focus:ring-2","focus:ring-teal-500","focus:border-transparent","bg-white","shadow-md","relative","z-10"],["icon","mdi:magnify",1,"absolute","right-4","top-1/2","transform","-translate-y-1/2","text-gray-400","text-xl","pointer-events-none","z-10"],[1,"w-full","flex","items-center","justify-center","space-x-2","bg-teal-500","text-white","px-4","py-3","rounded-lg","hover:bg-teal-600","transition-colors","font-medium","shadow-sm","relative","z-10",3,"click"],["icon","mdi:account-plus-outline",1,"text-xl"],[1,"bg-[#00796B]","shadow","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","divide-y","divide-gray-200","divide-x","divide-gray-200"],[1,""],[1,"px-2","py-2","text-center","text-xs","font-medium","text-white","w-auto"],[1,"px-3","md:px-6","py-2","text-center","text-xs","font-medium","text-white"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"md:hidden","space-y-4","relative","z-10","bg-gray-100","pb-6"],["class","bg-white rounded-lg shadow-sm border border-gray-200 p-4 relative z-10",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12 bg-gray-100",4,"ngIf"],[1,"md:hidden","text-center","py-2","text-xs","text-gray-500"],[3,"cerrar",4,"ngIf"],[3,"administrador","cerrar",4,"ngIf"],[3,"adminsId","confirmar","cancelar",4,"ngIf"],[1,"px-2","text-center","whitespace-nowrap","w-auto","text-xs"],[1,"px-3","md:px-6","text-center","whitespace-nowrap","text-xs"],[1,"px-3","md:px-6","whitespace-nowrap","text-center","text-xs"],["aria-label","Editar",1,"inline-flex","items-center","p-1","rounded","hover:bg-gray-100","transition",3,"click"],["icon","mdi:square-edit-outline",1,"text-2xl","text-teal-600"],["aria-label","Eliminar",1,"inline-flex","items-center","p-1","rounded","hover:bg-gray-100","transition",3,"click"],["icon","mdi:delete-outline",1,"text-2xl","text-red-600"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-4","relative","z-10"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-teal-100","rounded-full","flex","items-center","justify-center","flex-shrink-0"],["icon","mdi:account-circle-outline",1,"text-teal-600","text-xl"],[1,"min-w-0","flex-1"],[1,"font-semibold","text-gray-900","text-sm","truncate"],[1,"text-xs","text-gray-500"],[1,"flex","space-x-1","flex-shrink-0"],["aria-label","Editar",1,"p-2","rounded-full","hover:bg-gray-100","transition-colors",3,"click"],["icon","mdi:square-edit-outline",1,"text-lg","text-teal-600"],["aria-label","Eliminar",1,"p-2","rounded-full","hover:bg-gray-100","transition-colors",3,"click"],["icon","mdi:delete-outline",1,"text-lg","text-red-600"],[1,"space-y-2"],[1,"flex","items-center","justify-between","py-1","border-b","border-gray-100"],[1,"text-xs","font-medium","text-gray-500"],[1,"text-sm","text-gray-900","font-medium"],[1,"flex","items-start","justify-between","py-1","border-b","border-gray-100"],[1,"text-xs","font-medium","text-gray-500","flex-shrink-0"],[1,"text-sm","text-gray-900","text-right","ml-2","break-all"],[1,"flex","items-center","justify-between","py-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-teal-100","text-teal-800"],[1,"text-center","py-12","bg-gray-100"],["icon","mdi:account-off-outline",1,"text-5xl","text-gray-400","mb-3"],[1,"text-gray-500","text-sm"],[3,"cerrar"],[3,"cerrar","administrador"],[3,"confirmar","cancelar","adminsId"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),n(7," Administradores"),i()(),r(8,"div",7)(9,"label",8),n(10,"Buscar:"),i(),y(11,"input",9),r(12,"div",10)(13,"button",11),g("click",function(){return t.abrirModalAgregar()}),y(14,"iconify-icon",12),r(15,"span",13),n(16,"Agregar"),i()()()()()(),r(17,"div",14)(18,"div",15)(19,"h1",16),n(20,"Administradores"),i()(),r(21,"div",17)(22,"div",18),y(23,"input",19)(24,"iconify-icon",20),i(),r(25,"button",21),g("click",function(){return t.abrirModalAgregar()}),y(26,"iconify-icon",22),r(27,"span"),n(28,"Agregar"),i()()()(),r(29,"div",3)(30,"div",23)(31,"div",24)(32,"table",25)(33,"thead",26)(34,"tr")(35,"th",27),n(36,"ID"),i(),r(37,"th",28),n(38,"Usuario"),i(),r(39,"th",28),n(40,"Nombre"),i(),r(41,"th",28),n(42,"Apellido"),i(),r(43,"th",28),n(44,"Email"),i(),r(45,"th",28),n(46,"Perfil"),i(),r(47,"th",28),n(48,"Acciones"),i()()(),r(49,"tbody",29),b(50,fe,18,6,"tr",30),i()()()()(),r(51,"div",31),b(52,xe,31,6,"div",32)(53,_e,4,0,"div",33),r(54,"div",34),n(55),i()()()(),b(56,we,1,0,"app-agregar-administradores-modal",35)(57,he,1,1,"app-editar-administradores-modal",36)(58,be,1,1,"app-eliminar-administradores-modal",37),i()),s&2&&(d(50),p("ngForOf",t.admins),d(2),p("ngForOf",t.admins)("ngForTrackBy",t.trackByAdminId),d(),p("ngIf",t.admins.length===0),d(2),T(" Mostrando ",t.admins.length," administradores "),d(),p("ngIf",t.mostrarModalAgregar),d(),p("ngIf",t.mostrarModalEditar),d(),p("ngIf",t.mostrarModalEliminar))},dependencies:[V,K,I,ie,ne,re],styles:["@media (max-width: 767px){.card-enter[_ngcontent-%COMP%]{animation:slideInUp .3s ease-out}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 767px){.mobile-scroll[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}}@media (max-width: 767px){.search-input-mobile[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #14b8a61a}}"]})}}return a})();export{Ze as AdministradoresComponent};
