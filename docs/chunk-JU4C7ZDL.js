import{a as j}from"./chunk-LAG6LJGU.js";import{a as L,b as N}from"./chunk-MFWOEJ6H.js";import{e as F,h as z,r as H}from"./chunk-VBC45PGF.js";import"./chunk-EWES4JOE.js";import"./chunk-OZO3W66J.js";import{f as q}from"./chunk-B24EO72Z.js";import{$a as a,Bb as T,Cb as E,Fa as y,Ma as i,Na as O,Za as C,_ as S,ab as k,bb as v,db as o,dc as I,eb as r,fb as c,fc as V,ga as d,gb as x,ha as m,hb as _,ib as f,jb as g,kb as l,sb as p,ub as b,xb as w,yb as P,zb as M}from"./chunk-HWFM7EIN.js";import"./chunk-5FZOKLP6.js";var W=()=>({height:"70%"}),G=()=>({minHeight:"250px"});function A(n,h){if(n&1&&(x(0),o(1,"div",14),c(2,"div",15),r(),_()),n&2){let e=l();i(2),a("innerHTML",e.htmlContent||"No hay contenido disponible",y)}}function B(n,h){if(n&1){let e=f();x(0),o(1,"div",16)(2,"quill-editor",17),M("ngModelChange",function(t){d(e);let u=l();return P(u.htmlContent,t)||(u.htmlContent=t),m(t)}),r()(),_()}if(n&2){let e=l();i(2),w("ngModel",e.htmlContent),a("styles",E(2,W))}}function D(n,h){if(n&1){let e=f();o(0,"button",18),g("click",function(){d(e);let t=l();return m(t.guardarContenido())}),c(1,"iconify-icon",19),p(2),r()}if(n&2){let e=l();a("disabled",e.isSaving),i(),v("animate-spin",e.isSaving),a("icon",e.isSaving?"mdi:loading":"mdi:content-save"),i(),b(" ",e.isSaving?"Guardando...":"Guardar"," ")}}function Q(n,h){if(n&1){let e=f();x(0),o(1,"div",20),c(2,"div",21),r(),o(3,"div",22)(4,"button",23),g("click",function(){d(e);let t=l();return m(t.showEditor=!t.showEditor)}),c(5,"iconify-icon",24),p(6," Editar Presentaci\xF3n "),r()(),_()}if(n&2){let e=l();i(2),a("innerHTML",e.htmlContent||"No hay contenido disponible",y)}}function U(n,h){if(n&1){let e=f();x(0),o(1,"div",25)(2,"div",26)(3,"div",27),c(4,"iconify-icon",28),o(5,"span",29),p(6,"Editor de Presentaci\xF3n"),r()(),o(7,"button",30),g("click",function(){d(e);let t=l();return m(t.showEditor=!1)}),c(8,"iconify-icon",31),r()()(),o(9,"div",32)(10,"quill-editor",33),M("ngModelChange",function(t){d(e);let u=l();return P(u.htmlContent,t)||(u.htmlContent=t),m(t)}),r()(),o(11,"div",34)(12,"button",35),g("click",function(){d(e);let t=l();return m(t.showEditor=!1)}),c(13,"iconify-icon",36),p(14," Cancelar "),r(),o(15,"button",37),g("click",function(){d(e);let t=l();return m(t.guardarContenido())}),c(16,"iconify-icon",38),p(17),r()(),_()}if(n&2){let e=l();i(10),w("ngModel",e.htmlContent),a("styles",E(7,G)),i(5),a("disabled",e.isSaving),i(),v("animate-spin",e.isSaving),a("icon",e.isSaving?"mdi:loading":"mdi:content-save"),i(),b(" ",e.isSaving?"Guardando...":"Guardar"," ")}}var ne=(()=>{class n{constructor(e){this.empresasSvc=e,this.showEditor=!1,this.htmlContent="",this.isSaving=!1}ngOnInit(){console.log("PresentacionComponent inicializado"),this.cargarPresentacion()}cargarPresentacion(){this.empresasSvc.getInfoInstitucional().subscribe({next:e=>{console.log("Info cargada:",e),this.info=e,this.htmlContent=e.descripcion||"Bienvenido a nuestra empresa. Aqu\xED puedes agregar la presentaci\xF3n de tu organizaci\xF3n."},error:e=>{console.error("Error al cargar presentaci\xF3n:",e),this.htmlContent="Bienvenido a nuestra empresa. Aqu\xED puedes agregar la presentaci\xF3n de tu organizaci\xF3n."}})}onEditar(){this.showEditor=!0}guardarContenido(){this.isSaving||(this.isSaving=!0,console.log("Guardando contenido:",this.htmlContent),this.empresasSvc.actualizarInfoInstitucional({descripcion:this.htmlContent}).subscribe({next:()=>{console.log("Descripci\xF3n actualizada exitosamente"),this.showEditor=!1,this.isSaving=!1},error:e=>{console.error("Error al guardar descripci\xF3n:",e),this.isSaving=!1,alert("No se pudo guardar la presentaci\xF3n. Intenta de nuevo.")}}))}static{this.\u0275fac=function(s){return new(s||n)(O(j))}}static{this.\u0275cmp=S({type:n,selectors:[["app-presentacion"]],standalone:!0,features:[T],decls:19,vars:8,consts:[[1,"flex","flex-col","bg-white","rounded-md","shadow-sm"],[1,"p-3","md:p-4"],[1,"flex","items-center","pb-2","md:pl-2","pb-3","border-b","border-gray-100"],["icon","mdi:book-open-page-variant",1,"text-xl","md:text-2xl","mr-2"],[1,"text-lg","md:text-xl","font-semibold"],[1,"hidden","md:block"],[1,"rounded-md","px-4","py-2","w-full","max-w-full","mx-auto","bg-gray-200"],[1,"rounded-md","text-sm","h-full",2,"height","100%"],[4,"ngIf"],[1,"flex","justify-end","mt-4","space-x-2"],[1,"flex","items-center","bg-orange-400","text-white","rounded-full","px-3","md:px-4","py-1.5","md:py-2","text-xs","md:text-sm","hover:bg-orange-500","transition-colors","duration-200",3,"click"],["icon","mdi:pencil",1,"mr-1","md:mr-2"],["class","flex items-center bg-green-500 text-white rounded-full px-3 md:px-4 py-1.5 md:py-2 text-xs md:text-sm hover:bg-green-600 disabled:opacity-50 transition-colors duration-200",3,"disabled","click",4,"ngIf"],[1,"md:hidden"],[1,"bg-gray-200","rounded","p-4","h-full","overflow-auto"],[1,"prose","prose-sm","max-w-none",3,"innerHTML"],[1,"bg-white","rounded","h-full"],["placeholder","Escribe la presentaci\xF3n de tu empresa...",1,"bg-white","w-full","flex-1","h-full","ql-editor","ql-blank",3,"ngModelChange","ngModel","styles"],[1,"flex","items-center","bg-green-500","text-white","rounded-full","px-3","md:px-4","py-1.5","md:py-2","text-xs","md:text-sm","hover:bg-green-600","disabled:opacity-50","transition-colors","duration-200",3,"click","disabled"],[1,"mr-1","md:mr-2",3,"icon"],[1,"bg-gray-100","rounded-lg","p-4","mt-4","min-h-[200px]"],[1,"prose","prose-sm","max-w-none","text-sm","leading-relaxed",3,"innerHTML"],[1,"mt-4"],[1,"w-full","flex","items-center","justify-center","bg-orange-400","text-white","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-orange-500","transition-colors","duration-200",3,"click"],["icon","mdi:pencil",1,"mr-2","text-lg"],[1,"bg-gray-50","rounded-t-lg","p-3","mt-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["icon","mdi:format-text",1,"text-lg","text-gray-600","mr-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"p-1","hover:bg-gray-200","rounded","transition-colors",3,"click"],["icon","mdi:close",1,"text-lg","text-gray-600"],[1,"bg-white","rounded-b-lg","border","border-gray-200","border-t-0"],["placeholder","Describe tu empresa, su historia, valores y lo que la hace \xFAnica...",1,"mobile-editor",3,"ngModelChange","ngModel","styles"],[1,"flex","space-x-3","mt-4"],[1,"flex-1","flex","items-center","justify-center","bg-orange-400","text-white","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-gray-600","transition-colors","duration-200",3,"click"],["icon","mdi:close",1,"mr-2"],[1,"flex-1","flex","items-center","justify-center","bg-green-500","text-white","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-green-600","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"click","disabled"],[1,"mr-2",3,"icon"]],template:function(s,t){s&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),c(3,"iconify-icon",3),o(4,"h2",4),p(5,"Presentaci\xF3n"),r()(),o(6,"div",5)(7,"div",6)(8,"div",7),C(9,A,3,1,"ng-container",8)(10,B,3,3,"ng-container",8),r()(),o(11,"div",9)(12,"button",10),g("click",function(){return t.showEditor=!t.showEditor}),c(13,"iconify-icon",11),p(14),r(),C(15,D,3,5,"button",12),r()(),o(16,"div",13),C(17,Q,7,1,"ng-container",8)(18,U,18,8,"ng-container",8),r()()()),s&2&&(i(7),k("height",299,"px"),i(2),a("ngIf",!t.showEditor),i(),a("ngIf",t.showEditor),i(4),b(" ",t.showEditor?"Cerrar":"Editar"," "),i(),a("ngIf",t.showEditor),i(2),a("ngIf",!t.showEditor),i(),a("ngIf",t.showEditor))},dependencies:[V,I,H,F,z,N,L,q],styles:[".ql-editor[_ngcontent-%COMP%]{min-height:200px}.mobile-editor[_ngcontent-%COMP%]   .ql-editor[_ngcontent-%COMP%]{min-height:250px;font-size:14px}@media (max-width: 767px){.prose[_ngcontent-%COMP%]{font-size:14px;line-height:1.6}}.prose[_ngcontent-%COMP%]{color:#374151}.prose[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#111827;font-weight:600}.prose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.prose[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-bottom:1rem;padding-left:1.5rem}.prose[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}@media (max-width: 767px){.mobile-editor[_ngcontent-%COMP%]{border-radius:0 0 .5rem .5rem}.mobile-editor[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]{border-top:none;border-left:1px solid #e5e7eb;border-right:1px solid #e5e7eb;background-color:#f9fafb}.mobile-editor[_ngcontent-%COMP%]   .ql-container[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;border-left:1px solid #e5e7eb;border-right:1px solid #e5e7eb}}"]})}}return n})();export{ne as PresentacionComponent};
