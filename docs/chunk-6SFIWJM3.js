import{a as h}from"./chunk-EWES4JOE.js";import{h as V}from"./chunk-Q3OPCDQA.js";import"./chunk-OZO3W66J.js";import{c as x,f as M}from"./chunk-B24EO72Z.js";import{$a as a,Bb as A,Ga as I,Ma as l,Na as y,P as g,U as f,Za as d,_ as S,cc as F,db as i,dc as D,eb as r,fb as m,fc as T,ga as b,ha as C,ia as _,ib as P,ja as k,jb as p,kb as u,sb as s,tb as E,ub as w,vb as j}from"./chunk-HWFM7EIN.js";import"./chunk-5FZOKLP6.js";var O=(()=>{class t{constructor(e){this.http=e,this.url=h.apiUrl+"/clientes"}obtenerClientes(){return this.http.get(this.url)}static{this.\u0275fac=function(n){return new(n||t)(f(x))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var U=(()=>{class t{constructor(e){this.http=e,this.apiUrl=h.apiUrl+"/clientes/vista"}obtenerProductosPorCliente(e){return this.http.get(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(n){return new(n||t)(f(x))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function B(t,c){if(t&1){let e=P();i(0,"div",17)(1,"p",18),s(2),r(),m(3,"img",19),i(4,"p",20),s(5,"Ellos ya cuentan con nuestros productos"),r(),i(6,"button",21),p("click",function(){let o=b(e).$implicit,v=u();return C(v.abrirModal(o))}),s(7," Productos Adquiridos "),r()()}if(t&2){let e=c.$implicit;l(2),w(" ",e.nombreCliente," "),l(),a("src",e.imagenCliente,I)}}function G(t,c){t&1&&(i(0,"div",31),s(1,"Cargando productos..."),r())}function N(t,c){if(t&1&&(i(0,"li"),s(1),r()),t&2){let e=c.$implicit;l(),E(e.nombreProducto)}}function L(t,c){if(t&1&&(i(0,"div")(1,"ul",32),d(2,N,2,1,"li",33),r()()),t&2){let e=u(2);l(2),a("ngForOf",e.productosCliente)}}function R(t,c){t&1&&(i(0,"div",31),s(1," Este cliente a\xFAn no ha adquirido productos. "),r())}function J(t,c){if(t&1){let e=P();i(0,"div",22)(1,"div",23)(2,"button",24),p("click",function(){b(e);let o=u();return C(o.cerrarDetalle())}),s(3," \u2715 "),r(),i(4,"div",25)(5,"p",26),s(6),r()(),i(7,"div",27)(8,"h3",28),s(9,"Productos Adquiridos"),r(),d(10,G,2,0,"div",29)(11,L,3,1,"div",30)(12,R,2,0,"div",29),r()()()}if(t&2){let e=u();l(6),w(" ",e.clienteSeleccionado==null?null:e.clienteSeleccionado.nombreCliente," "),l(4),a("ngIf",e.cargandoProductos),l(),a("ngIf",!e.cargandoProductos&&e.productosCliente.length>0),l(),a("ngIf",!e.cargandoProductos&&e.productosCliente.length===0)}}var ee=(()=>{class t{constructor(e,n){this.clientesService=e,this.vistaClienteService=n,this.clientes=[],this.clientesPaginados=[],this.paginaActual=0,this.clientesPorPagina=4,this.totalClientes=0,this.clienteSeleccionado=null,this.productosCliente=[],this.cargandoProductos=!1,this.mostrarDetalle=!1}ngOnInit(){this.clientesService.obtenerClientes().subscribe({next:e=>{this.clientes=e,this.totalClientes=e.length,this.actualizarClientesPaginados()},error:e=>{console.error("Error al obtener clientes",e)}})}actualizarClientesPaginados(){let e=this.paginaActual*this.clientesPorPagina,n=e+this.clientesPorPagina;this.clientesPaginados=this.clientes.slice(e,n)}siguientePagina(){(this.paginaActual+1)*this.clientesPorPagina<this.totalClientes&&(this.paginaActual++,this.actualizarClientesPaginados())}anteriorPagina(){this.paginaActual>0&&(this.paginaActual--,this.actualizarClientesPaginados())}abrirModal(e){this.clienteSeleccionado=e,this.cargandoProductos=!0,this.mostrarDetalle=!0,this.vistaClienteService.obtenerProductosPorCliente(e.id).subscribe({next:n=>{this.productosCliente=n,this.cargandoProductos=!1},error:n=>{console.error("Error al cargar productos del cliente",n),this.productosCliente=[],this.cargandoProductos=!1}})}cerrarDetalle(){this.mostrarDetalle=!1,this.clienteSeleccionado=null,this.productosCliente=[]}static{this.\u0275fac=function(n){return new(n||t)(y(O),y(U))}}static{this.\u0275cmp=S({type:t,selectors:[["app-clientes"]],standalone:!0,features:[A],decls:21,vars:6,consts:[[1,"w-full","flex","justify-center","px-2","sm:px-4","py-6"],[1,"w-full","max-w-6xl"],[1,"flex","items-center","gap-2","mb-4","justify-center","sm:justify-start","text-center","sm:text-left"],["src","https://img.icons8.com/color/48/group-background-selected.png","alt","Clientes",1,"w-6","h-6"],[1,"text-lg","sm:text-xl","font-semibold"],[1,"border-2","border-gray-300","rounded-md","p-3","sm:p-4"],[1,"relative"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","border border-[#00A99D] rounded-md px-3 py-3 flex flex-col items-center text-sm h-auto text-center",4,"ngFor","ngForOf"],[1,"flex","flex-col","sm:flex-row","sm:justify-end","items-center","mt-4","gap-2","text-center","sm:text-right"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],[1,"w-9","h-9","flex","items-center","justify-center","rounded-full","border","border-gray-300","text-gray-700","hover:bg-[#007F6D]",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-40 backdrop-blur-sm",4,"ngIf"],[1,"border","border-[#00A99D]","rounded-md","px-3","py-3","flex","flex-col","items-center","text-sm","h-auto","text-center"],[1,"text-[#00A99D]","font-bold","text-xs","leading-tight","whitespace-pre-line"],["alt","avatar",1,"w-12","h-12","mt-2","object-cover","rounded-full","border",3,"src"],[1,"text-xs","mt-2","text-gray-600"],[1,"mt-2","px-3","py-1.5","text-xs","font-semibold","text-white","bg-gradient-to-r","from-[#F8B7A0]","to-[#F08C68]","rounded-full","shadow-md","hover:shadow-lg","hover:scale-105","transition-all","duration-300","ease-in-out",3,"click"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50","bg-black","bg-opacity-40","backdrop-blur-sm"],[1,"bg-white","rounded-xl","shadow-xl","w-11/12","max-w-xl","p-4","relative","flex","flex-col","sm:flex-row","gap-3"],[1,"absolute","top-2","right-2","text-gray-500","hover:text-red-500","text-xl",3,"click"],[1,"sm:w-1/2","flex","items-center","justify-center","border-b","sm:border-b-0","sm:border-r","border-gray-300","pb-3","sm:pb-0","sm:pr-3"],[1,"text-center","text-base","sm:text-lg","font-bold","text-[#00A99D]","break-words"],[1,"sm:w-1/2","sm:pl-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-800","mb-2"],["class","text-xs text-gray-500",4,"ngIf"],[4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"list-disc","list-inside","text-xs","text-gray-700"],[4,"ngFor","ngForOf"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),m(3,"img",3),i(4,"h2",4),s(5,"Ellos conf\xEDan en nosotros"),r()(),i(6,"div",5)(7,"div",6)(8,"div",7),d(9,B,8,2,"div",8),r(),i(10,"div",9)(11,"span",10),s(12),r(),i(13,"div",11)(14,"button",12),p("click",function(){return o.anteriorPagina()}),_(),i(15,"svg",13),m(16,"path",14),r()(),k(),i(17,"button",12),p("click",function(){return o.siguientePagina()}),_(),i(18,"svg",13),m(19,"path",15),r()()()()()()()(),d(20,J,13,4,"div",16)),n&2&&(l(9),a("ngForOf",o.clientesPaginados),l(3),j(" Mostrar clientes ",o.paginaActual*o.clientesPorPagina+o.clientesPaginados.length," de ",o.totalClientes," "),l(2),a("disabled",o.paginaActual===0),l(3),a("disabled",(o.paginaActual+1)*o.clientesPorPagina>=o.totalClientes),l(3),a("ngIf",o.mostrarDetalle))},dependencies:[T,F,D,M,V]})}}return t})();export{ee as ClientesComponent};
