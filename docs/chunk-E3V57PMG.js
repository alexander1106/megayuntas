import{a as H}from"./chunk-74UORZKX.js";import{c as N,e as j,f as D,g as W,h as G,i as q,m as B,o as R,r as z}from"./chunk-VBC45PGF.js";import"./chunk-EWES4JOE.js";import{b as A,d as L}from"./chunk-Q3OPCDQA.js";import"./chunk-OZO3W66J.js";import"./chunk-B24EO72Z.js";import{$a as s,Bb as V,Eb as T,Ma as o,Na as _,Za as w,_ as S,bc as E,db as n,dc as F,eb as i,fb as f,fc as I,ga as p,ha as g,ia as h,ib as M,jb as C,kb as x,rb as k,sb as m,ub as v,xb as b,yb as P,zb as y}from"./chunk-HWFM7EIN.js";import"./chunk-5FZOKLP6.js";var J=(t,l)=>({"text-red-500":t,"text-green-600":l});function K(t,l){if(t&1&&(n(0,"div",17),m(1),i()),t&2){let r=x();s("ngClass",T(2,J,r.error,!r.error)),o(),v(" ",r.message," ")}}function O(t,l){t&1&&(h(),n(0,"svg",18),f(1,"path",19)(2,"path",20),i())}function Q(t,l){t&1&&(h(),n(0,"svg",18),f(1,"path",21),i())}function U(t,l){t&1&&(h(),n(0,"svg",18),f(1,"path",19)(2,"path",20),i())}function X(t,l){t&1&&(h(),n(0,"svg",18),f(1,"path",21),i())}function Y(t,l){t&1&&(n(0,"p",22),m(1," \u2022 La contrase\xF1a debe tener al menos 6 caracteres "),i())}function Z(t,l){t&1&&(n(0,"p",22),m(1," \u2022 Ambas contrase\xF1as deben coincidir "),i())}var se=(()=>{class t{constructor(r,d,e){this.route=r,this.router=d,this.authService=e,this.password="",this.confirmPassword="",this.token="",this.loading=!1,this.showPassword=!1,this.showPasswordConfirm=!1,this.message="",this.error=!1,this.token=this.route.snapshot.queryParamMap.get("token")||""}togglePassword(){this.showPassword=!this.showPassword}togglePasswordConfirm(){this.showPasswordConfirm=!this.showPasswordConfirm}goToLogin(){this.router.navigate(["/login"])}onSubmit(r){if(r.invalid){this.showMessage("\u26A0\uFE0F Debes completar todos los campos correctamente.",!0);return}if(this.password.length<6){this.showMessage("\u26A0\uFE0F La contrase\xF1a debe tener al menos 6 caracteres.",!0);return}if(this.password!==this.confirmPassword){this.showMessage("\u274C Las contrase\xF1as no coinciden.",!0);return}this.loading=!0,this.authService.changePassword(this.token,this.password).subscribe({next:()=>{this.loading=!1,this.showMessage("\u2705 Contrase\xF1a cambiada exitosamente.",!1),r.reset(),setTimeout(()=>this.goToLogin(),1500)},error:()=>{this.loading=!1,this.showMessage("\u274C Error al cambiar la contrase\xF1a. El enlace puede haber expirado.",!0)}})}showMessage(r,d){this.message=r,this.error=d,setTimeout(()=>this.message="",4e3)}static{this.\u0275fac=function(d){return new(d||t)(_(A),_(L),_(H))}}static{this.\u0275cmp=S({type:t,selectors:[["app-change-password"]],standalone:!0,features:[V],decls:26,vars:13,consts:[["changeForm","ngForm"],[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"bg-white","shadow-lg","rounded-2xl","p-8","w-full","max-w-md","text-center"],[1,"text-3xl","font-bold","mb-6","text-[#00A89D]"],[1,"text-gray-600","mb-4"],["class","mb-4 font-medium",3,"ngClass",4,"ngIf"],[3,"ngSubmit"],[1,"relative","mb-4"],["name","password","placeholder","Nueva contrase\xF1a","required","","minlength","6",1,"w-full","border","px-4","py-2","rounded-md","focus:outline-none","bg-gray-100",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","right-3","top-2.5","text-gray-500","hover:text-[#00A89D]",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"relative","mb-6"],["name","confirmPassword","placeholder","Confirmar contrase\xF1a","required","","minlength","6",1,"w-full","border","px-4","py-2","rounded-md","focus:outline-none","bg-gray-100",3,"ngModelChange","type","ngModel"],[1,"text-sm","text-left","mb-4"],["class","text-red-500",4,"ngIf"],["type","submit",1,"w-full","py-3","rounded-full","text-white","text-lg","font-semibold","transition","duration-300","bg-[#00A89D]","hover:bg-[#009387]",3,"disabled"],[1,"mt-4","text-[#F28C7F]","underline","hover:text-[#e07a6e]",3,"click"],[1,"mb-4","font-medium",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.973 9.973 0 013.24-4.419M9.88 9.88A3 3 0 0114.12 14.12M15 15l3.5 3.5M3 3l18 18"],[1,"text-red-500"]],template:function(d,e){if(d&1){let u=M();n(0,"div",1)(1,"div",2)(2,"h2",3),m(3,"Cambiar Contrase\xF1a"),i(),n(4,"p",4),m(5,"Ingresa tu nueva contrase\xF1a"),i(),w(6,K,2,5,"div",5),n(7,"form",6,0),C("ngSubmit",function(){p(u);let a=k(8);return g(e.onSubmit(a))}),n(9,"div",7)(10,"input",8),y("ngModelChange",function(a){return p(u),P(e.password,a)||(e.password=a),g(a)}),i(),n(11,"button",9),C("click",function(){return p(u),g(e.togglePassword())}),w(12,O,3,0,"svg",10)(13,Q,2,0,"svg",10),i()(),n(14,"div",11)(15,"input",12),y("ngModelChange",function(a){return p(u),P(e.confirmPassword,a)||(e.confirmPassword=a),g(a)}),i(),n(16,"button",9),C("click",function(){return p(u),g(e.togglePasswordConfirm())}),w(17,U,3,0,"svg",10)(18,X,2,0,"svg",10),i()(),n(19,"div",13),w(20,Y,2,0,"p",14)(21,Z,2,0,"p",14),i(),n(22,"button",15),m(23),i()(),n(24,"button",16),C("click",function(){return p(u),g(e.goToLogin())}),m(25," \u2190 Volver al inicio de sesi\xF3n "),i()()()}d&2&&(o(6),s("ngIf",e.message),o(4),s("type",e.showPassword?"text":"password"),b("ngModel",e.password),o(2),s("ngIf",!e.showPassword),o(),s("ngIf",e.showPassword),o(2),s("type",e.showPasswordConfirm?"text":"password"),b("ngModel",e.confirmPassword),o(2),s("ngIf",!e.showPasswordConfirm),o(),s("ngIf",e.showPasswordConfirm),o(2),s("ngIf",e.password&&e.password.length<6),o(),s("ngIf",e.confirmPassword&&e.password!==e.confirmPassword),o(),s("disabled",e.loading),o(),v(" ",e.loading?"Cambiando...":"Cambiar contrase\xF1a"," "))},dependencies:[I,E,F,z,q,N,j,D,B,R,G,W]})}}return t})();export{se as ChangePasswordComponent};
